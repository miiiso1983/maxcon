# ูุธุงู ุฅุฏุงุฑุฉ ุงูุตูุฏููุฉ ูุชุนุฏุฏ ุงููุณุชุฃุฌุฑูู

## ๐๏ธ ูุธุฑุฉ ุนุงูุฉ ุนูู ุงููุธุงู

ุชู ุชุทููุฑ ูุธุงู ุฅุฏุงุฑุฉ ุงูุตูุฏููุฉ ููููู ูุธุงูุงู ูุชุนุฏุฏ ุงููุณุชุฃุฌุฑูู (Multi-Tenant) ูุน ุนุฒู ูุงูู ููุจูุงูุงุช ููุธุงู ุชุฑุฎูุต ูุชูุฏู ูููุญุฉ ุชุญูู ุฑุฆูุณูุฉ ุดุงููุฉ ููุณูุจุฑ ุฃุฏูู.

## ๐ฏ ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ

### 1. ุฅุฏุงุฑุฉ ุงููุณุชุฃุฌุฑูู (Tenant Management)
- โ ุฅูุดุงุก ูุฅุฏุงุฑุฉ ุญุณุงุจุงุช ุงููุณุชุฃุฌุฑูู
- โ ุนุฒู ูุงูู ููุจูุงูุงุช ุจูู ุงููุณุชุฃุฌุฑูู
- โ ูุธุงู ุชุฑุฎูุต ูุชูุฏู ูุน ุชูุงุฑูุฎ ุงูุชูุงุก
- โ ุฅุญุตุงุฆูุงุช ุงุณุชุฎุฏุงู ููุตูุฉ ููู ูุณุชุฃุฌุฑ
- โ ูุธุงู ุชุนููู ูุฅูุบุงุก ุชุนููู ุงููุณุชุฃุฌุฑูู

### 2. ูุธุงู ุงูุชุฑุฎูุต (License Management)
- โ ุฃููุงุน ุชุฑุงุฎูุต ูุชุนุฏุฏุฉ (ุชุฌุฑูุจูุ ุฃุณุงุณูุ ุงุญุชุฑุงููุ ูุคุณุณู)
- โ ุชุญุฏูุฏ ุญุฏูุฏ ุงููุณุชุฎุฏููู ูุงูุชุฎุฒูู ููู ุชุฑุฎูุต
- โ ูููุฒุงุช ูุงุจูุฉ ููุชุฎุตูุต ุญุณุจ ููุน ุงูุชุฑุฎูุต
- โ ูุธุงู ุชุฌุฏูุฏ ุชููุงุฆู ููุฏูู
- โ ุชุชุจุน ุงูุชูุงุก ุงูุชุฑุงุฎูุต ูุงูุชูุจููุงุช

### 3. ููุญุฉ ุงูุชุญูู ุงูุฑุฆูุณูุฉ (Super Admin Dashboard)
- โ ุฅุญุตุงุฆูุงุช ุดุงููุฉ ูููุธุงู
- โ ูุฑุงูุจุฉ ุฃุฏุงุก ุงููุณุชุฃุฌุฑูู
- โ ุชูุงุฑูุฑ ุงูุฅูุฑุงุฏุงุช ูุงูุงุณุชุฎุฏุงู
- โ ุฑุณูู ุจูุงููุฉ ุชูุงุนููุฉ
- โ ุชูุจููุงุช ุงูุฃูุงู ูุงููุธุงู

### 4. ุงูุฃูุงู ูุงููุฑุงูุจุฉ (Security & Monitoring)
- โ ูุตุงุฏูุฉ ุซูุงุฆูุฉ (2FA) ููุณูุจุฑ ุฃุฏูู ููุฏูุฑู ุงููุณุชุฃุฌุฑูู
- โ ุณูุงุณุงุช ูููุฉ ูุฑูุฑ ูุชูุฏูุฉ
- โ ูุฑุงูุจุฉ ูุญุงููุงุช ุชุณุฌูู ุงูุฏุฎูู ุงููุดุจููุฉ
- โ ุณุฌู ุชุฏููู ุดุงูู ูุฌููุน ุงูุนูููุงุช
- โ ุญุธุฑ IP ุชููุงุฆู ููุฃูุดุทุฉ ุงููุดุจููุฉ

### 5. ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช (Data Management)
- โ ุญุฐู ุขูู ูููุณุชุฃุฌุฑูู ูุน ุฌููุน ุจูุงูุงุชูู
- โ ูุณุฎ ุงุญุชูุงุทูุฉ ุชููุงุฆูุฉ ูุจู ุงูุญุฐู
- โ ุงุณุชุนุงุฏุฉ ุงูุจูุงูุงุช ูู ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ
- โ ุชุตุฏูุฑ ุงูุจูุงูุงุช ุจุตูุบ ูุชุนุฏุฏุฉ

## ๐๏ธ ูููู ุงููุธุงู

### ุงูููุงุฐุฌ ุงูุฑุฆูุณูุฉ (Models)

#### 1. Tenant (ุงููุณุชุฃุฌุฑ)
```php
- id: ูุนุฑู ูุฑูุฏ
- tenant_code: ุฑูุฒ ุงููุณุชุฃุฌุฑ
- name: ุงุณู ุงูุดุฑูุฉ
- email: ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- license_type: ููุน ุงูุชุฑุฎูุต
- license_start_date: ุชุงุฑูุฎ ุจุฏุงูุฉ ุงูุชุฑุฎูุต
- license_end_date: ุชุงุฑูุฎ ุงูุชูุงุก ุงูุชุฑุฎูุต
- max_users: ุงูุญุฏ ุงูุฃูุตู ูููุณุชุฎุฏููู
- max_storage_gb: ุงูุญุฏ ุงูุฃูุตู ููุชุฎุฒูู
- features: ุงููููุฒุงุช ุงููุชุงุญุฉ
- status: ุญุงูุฉ ุงููุณุชุฃุฌุฑ
```

#### 2. TenantUser (ูุณุชุฎุฏูู ุงููุณุชุฃุฌุฑ)
```php
- id: ูุนุฑู ูุฑูุฏ
- tenant_id: ูุนุฑู ุงููุณุชุฃุฌุฑ
- name: ุงูุงุณู
- email: ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- role: ุงูุฏูุฑ (system_manager, admin, manager, employee)
- two_factor_enabled: ุชูุนูู ุงููุตุงุฏูุฉ ุงูุซูุงุฆูุฉ
- status: ุญุงูุฉ ุงููุณุชุฎุฏู
```

#### 3. SuperAdmin (ุงูุณูุจุฑ ุฃุฏูู)
```php
- id: ูุนุฑู ูุฑูุฏ
- name: ุงูุงุณู
- email: ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- role: ุงูุฏูุฑ (super_admin, admin, support)
- permissions: ุงูุตูุงุญูุงุช ุงููุฎุตุตุฉ
- can_create_tenants: ุตูุงุญูุฉ ุฅูุดุงุก ูุณุชุฃุฌุฑูู
- can_delete_tenants: ุตูุงุญูุฉ ุญุฐู ูุณุชุฃุฌุฑูู
- two_factor_enabled: ุชูุนูู ุงููุตุงุฏูุฉ ุงูุซูุงุฆูุฉ
```

#### 4. License (ุงูุชุฑุฎูุต)
```php
- id: ูุนุฑู ูุฑูุฏ
- license_type: ููุน ุงูุชุฑุฎูุต
- name: ุงุณู ุงูุชุฑุฎูุต
- max_users: ุงูุญุฏ ุงูุฃูุตู ูููุณุชุฎุฏููู
- max_storage_gb: ุงูุญุฏ ุงูุฃูุตู ููุชุฎุฒูู
- features: ุงููููุฒุงุช ุงููุชุงุญุฉ
- price_monthly: ุงูุณุนุฑ ุงูุดูุฑู
- price_yearly: ุงูุณุนุฑ ุงูุณููู
```

### ุงูุฎุฏูุงุช (Services)

#### 1. TenantManager
- ุฅูุดุงุก ูุฅุนุฏุงุฏ ุงููุณุชุฃุฌุฑูู ุงูุฌุฏุฏ
- ุชุญุฏูุซ ุฅุญุตุงุฆูุงุช ุงูุงุณุชุฎุฏุงู
- ุฅุฏุงุฑุฉ ุชุฑููุงุช ุงูุชุฑุงุฎูุต
- ุฅูุดุงุก ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ

#### 2. TenantDeletionService
- ุญุฐู ุขูู ูููุณุชุฃุฌุฑูู
- ุชูุธูู ุฌููุน ุงูุจูุงูุงุช ุงููุฑุชุจุทุฉ
- ุฅูุดุงุก ูุณุฎ ุงุญุชูุงุทูุฉ ูุจู ุงูุญุฐู
- ุชูุงุฑูุฑ ุงูุญุฐู ุงูููุตูุฉ

#### 3. TwoFactorAuthService
- ุฅุฏุงุฑุฉ ุงููุตุงุฏูุฉ ุงูุซูุงุฆูุฉ
- ุชูููุฏ ุฑููุฒ QR
- ุงูุชุญูู ูู ุงูุฑููุฒ
- ุฅุฏุงุฑุฉ ุฑููุฒ ุงูุงุณุชุฑุฏุงุฏ

#### 4. PasswordPolicyService
- ูุฑุถ ุณูุงุณุงุช ูููุฉ ุงููุฑูุฑ
- ุงูุชุญูู ูู ููุฉ ูููุฉ ุงููุฑูุฑ
- ููุน ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ูููุงุช ุงููุฑูุฑ
- ุชุชุจุน ุงูุชูุงุก ุตูุงุญูุฉ ูููุงุช ุงููุฑูุฑ

#### 5. SecurityMonitoringService
- ูุฑุงูุจุฉ ูุญุงููุงุช ุชุณุฌูู ุงูุฏุฎูู ุงููุดุจููุฉ
- ุญุธุฑ IP ุงูุชููุงุฆู
- ุชุณุฌูู ุงูุฃูุดุทุฉ ุงูุฃูููุฉ
- ุฅุฑุณุงู ุชูุจููุงุช ุงูุฃูุงู

### Middleware

#### 1. SuperAdminAuth
- ุงูุชุญูู ูู ุชุณุฌูู ุฏุฎูู ุงูุณูุจุฑ ุฃุฏูู
- ูุญุต ุญุงูุฉ ุงูุญุณุงุจ ุงููุดุทุฉ

#### 2. SuperAdminPermission
- ุงูุชุญูู ูู ุตูุงุญูุงุช ุงูุณูุจุฑ ุฃุฏูู
- ูุฑุถ ุงููููุฏ ุนูู ุงูุนูููุงุช ุงูุญุณุงุณุฉ

#### 3. TenantScope
- ุชุทุจูู ูุทุงู ุงููุณุชุฃุฌุฑ ุนูู ุงูุงุณุชุนูุงูุงุช
- ุงูุชุญูู ูู ุตุญุฉ ุงูุชุฑุฎูุต
- ุชุนููู ุงููุณุชุฃุฌุฑ ุงูุญุงูู

#### 4. EnsureTenantDataIsolation
- ุถูุงู ุนุฒู ุงูุจูุงูุงุช ุจูู ุงููุณุชุฃุฌุฑูู
- ุชุณุฌูู ุฃูุดุทุฉ ุงููุณุชุฃุฌุฑูู
- ูุฑุถ ูููุฏ ุงููุตูู

### Traits

#### TenantScoped
- ุชุทุจูู ูุทุงู ุงููุณุชุฃุฌุฑ ุชููุงุฆูุงู ุนูู ุงูููุงุฐุฌ
- ุชูููุฑ ุทุฑู ููุงุณุชุนูุงู ุนุจุฑ ุงููุณุชุฃุฌุฑูู
- ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจุงููุณุชุฃุฌุฑ

## ๐ ุงูุชุซุจูุช ูุงูุฅุนุฏุงุฏ

### 1. ุชุดุบูู ุงููุงูุฌุฑูุดู
```bash
php artisan migrate
```

### 2. ุชุดุบูู ุงูุณูุฏุฑ
```bash
php artisan db:seed --class=MultiTenantSystemSeeder
```

### 3. ุฅุนุฏุงุฏ ุงููุฌูุฏุงุช
```bash
php artisan storage:link
```

### 4. ุชุญุฏูุซ ุงูุตูุงุญูุงุช
```bash
chmod -R 755 storage
chmod -R 755 bootstrap/cache
```

## ๐ ุจูุงูุงุช ุชุณุฌูู ุงูุฏุฎูู ุงูุงูุชุฑุงุถูุฉ

### ุงูุณูุจุฑ ุฃุฏูู ุงูุฑุฆูุณู
- **ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:** superadmin@pharmacy-erp.com
- **ูููุฉ ุงููุฑูุฑ:** SuperAdmin@2024
- **ุงูุฑุงุจุท:** `/admin/login`

### ุงูุฃุฏูู ุงููุณุงุนุฏ
- **ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:** admin@pharmacy-erp.com
- **ูููุฉ ุงููุฑูุฑ:** Admin@2024

### ูุฑูู ุงูุฏุนู
- **ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:** support@pharmacy-erp.com
- **ูููุฉ ุงููุฑูุฑ:** Support@2024

### ูุฏูุฑู ุงููุณุชุฃุฌุฑูู ุงูุชุฌุฑูุจููู
- **ุตูุฏููุฉ ุงูููุฑ:** ahmed@alnoor-pharmacy.com / Manager@2024
- **ุตูุฏููุฉ ุงูุดูุงุก:** fatima@alshifa-pharmacy.com / Manager@2024

## ๐ ุฃููุงุน ุงูุชุฑุงุฎูุต

### 1. ุงููุณุฎุฉ ุงูุชุฌุฑูุจูุฉ (Trial)
- **ุงููุฏุฉ:** 30 ููู
- **ุงููุณุชุฎุฏููู:** 2
- **ุงูุชุฎุฒูู:** 1 GB
- **ุงูุณุนุฑ:** ูุฌุงูู

### 2. ุงูุจุงูุฉ ุงูุฃุณุงุณูุฉ (Basic)
- **ุงููุณุชุฎุฏููู:** 5
- **ุงูุชุฎุฒูู:** 5 GB
- **ุงูุณุนุฑ:** 299 ุฑูุงู/ุดูุฑ
- **ุงููููุฒุงุช:** ุฅุฏุงุฑุฉ ุงููุฎุฒููุ ุงููุจูุนุงุชุ ุงูุชูุงุฑูุฑ ุงูุฃุณุงุณูุฉ

### 3. ุงูุจุงูุฉ ุงูุงุญุชุฑุงููุฉ (Professional)
- **ุงููุณุชุฎุฏููู:** 15
- **ุงูุชุฎุฒูู:** 20 GB
- **ุงูุณุนุฑ:** 799 ุฑูุงู/ุดูุฑ
- **ุงููููุฒุงุช:** ุฌููุน ูููุฒุงุช ุงูุฃุณุงุณูุฉ + ุงููุดุชุฑูุงุชุ ุงููุตูุงุชุ ุงูุชูุงุฑูุฑ ุงููุชูุฏูุฉ

### 4. ุงูุจุงูุฉ ุงููุคุณุณูุฉ (Enterprise)
- **ุงููุณุชุฎุฏููู:** 100
- **ุงูุชุฎุฒูู:** 100 GB
- **ุงูุณุนุฑ:** 1999 ุฑูุงู/ุดูุฑ
- **ุงููููุฒุงุช:** ุฌููุน ุงููููุฒุงุช + APIุ ุชุนุฏุฏ ุงูููุงูุนุ ุงูุชุญูููุงุช ุงููุชูุฏูุฉ

## ๐ก๏ธ ุงูุฃูุงู

### ุณูุงุณุงุช ูููุฉ ุงููุฑูุฑ
- ุงูุญุฏ ุงูุฃุฏูู: 8 ุฃุญุฑู
- ูุฌุจ ุฃู ุชุญุชูู ุนูู: ุฃุญุฑู ูุจูุฑุฉ ูุตุบูุฑุฉุ ุฃุฑูุงูุ ุฑููุฒ ุฎุงุตุฉ
- ููุน ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ุขุฎุฑ 5 ูููุงุช ูุฑูุฑ
- ุงูุชูุงุก ุงูุตูุงุญูุฉ ูู 90 ููู

### ุงููุตุงุฏูุฉ ุงูุซูุงุฆูุฉ
- ุฏุนู Google Authenticator
- ุฑููุฒ ุงุณุชุฑุฏุงุฏ ุงุญุชูุงุทูุฉ
- ุฅุฌุจุงุฑูุฉ ููุณูุจุฑ ุฃุฏูู

### ูุฑุงูุจุฉ ุงูุฃูุงู
- ุชุณุฌูู ุฌููุน ูุญุงููุงุช ุชุณุฌูู ุงูุฏุฎูู
- ุญุธุฑ IP ุชููุงุฆู ุจุนุฏ ูุญุงููุงุช ูุงุดูุฉ
- ุชูุจููุงุช ุงูุฃูุดุทุฉ ุงููุดุจููุฉ
- ุณุฌู ุชุฏููู ุดุงูู

## ๐ ุงููุฑุงูุจุฉ ูุงูุชูุงุฑูุฑ

### ุฅุญุตุงุฆูุงุช ุงููุธุงู
- ุนุฏุฏ ุงููุณุชุฃุฌุฑูู ุงููุดุทูู
- ุฅุฌูุงูู ุงูุฅูุฑุงุฏุงุช
- ุงุณุชุฎุฏุงู ุงูุชุฎุฒูู ูุงููุณุชุฎุฏููู
- ูุนุฏูุงุช ุงูููู

### ุชูุงุฑูุฑ ุงููุณุชุฃุฌุฑูู
- ุฅุญุตุงุฆูุงุช ุงูุงุณุชุฎุฏุงู
- ุชูุงุฑูุฑ ุงููุดุงุท
- ุญุงูุฉ ุงูุชุฑุงุฎูุต
- ุงูุชูุจููุงุช ูุงูุฅุดุนุงุฑุงุช

### ุณุฌูุงุช ุงูุชุฏููู
- ุฌููุน ุนูููุงุช ุงูุณูุจุฑ ุฃุฏูู
- ุฃูุดุทุฉ ุงููุณุชุฃุฌุฑูู
- ุชุบููุฑุงุช ุงููุธุงู
- ูุญุงููุงุช ุงูุฃูุงู

## โ๏ธ ุชูุจููุงุช ูููุฉ

1. **ุชุบููุฑ ูููุงุช ุงููุฑูุฑ ุงูุงูุชุฑุงุถูุฉ** ูู ุจูุฆุฉ ุงูุฅูุชุงุฌ
2. **ุชูุนูู ุงููุตุงุฏูุฉ ุงูุซูุงุฆูุฉ** ูุฌููุน ุญุณุงุจุงุช ุงูุณูุจุฑ ุฃุฏูู
3. **ุฅุฌุฑุงุก ูุณุฎ ุงุญุชูุงุทูุฉ ุฏูุฑูุฉ** ููุงุนุฏุฉ ุงูุจูุงูุงุช
4. **ูุฑุงูุจุฉ ุณุฌูุงุช ุงูุฃูุงู** ุจุงูุชุธุงู
5. **ุชุญุฏูุซ ุงููุธุงู** ุจุงูุชุธุงู ููุญุตูู ุนูู ุขุฎุฑ ุงูุชุญุฏูุซุงุช ุงูุฃูููุฉ

## ๐ง ุงูุตูุงูุฉ

### ุชูุธูู ุงูุจูุงูุงุช ุงููุฏููุฉ
```bash
php artisan app:cleanup-audit-logs --days=180
```

### ุชุญุฏูุซ ุฅุญุตุงุฆูุงุช ุงููุณุชุฃุฌุฑูู
```bash
php artisan app:update-tenant-stats
```

### ูุญุต ุงูุชุฑุงุฎูุต ุงูููุชููุฉ
```bash
php artisan app:check-expired-licenses
```

## ๐ ุงูุฏุนู ุงูููู

ููุญุตูู ุนูู ุงูุฏุนู ุงูููู ุฃู ุงูุฅุจูุงุบ ุนู ูุดุงูู:
- **ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:** support@pharmacy-erp.com
- **ุงููุงุชู:** +966501234569

---

**ุชู ุชุทููุฑ ูุฐุง ุงููุธุงู ุจูุงุณุทุฉ ูุฑูู ุชุทููุฑ ูุธุงู ุฅุฏุงุฑุฉ ุงูุตูุฏููุฉ**
